import{A as j,w as F,z as R}from"./chunk-R5SC75US.js";import{a as O,c as z,h as B,m as L,n as D,o as P,s as W}from"./chunk-GUYZPJS7.js";import{i as I,j as N,q as E}from"./chunk-GPQJ3TGX.js";import{$ as f,Ab as d,Bb as w,Ib as c,Kb as x,Lb as M,Nb as u,Ob as h,Pb as g,Rb as k,Ya as s,Za as v,c as C,ia as y,ib as b,kb as m,lb as T,tb as r,ub as o,vb as p}from"./chunk-QLK2YSBK.js";var S=class a{getCharacterCount(t){return t.length}getSizeInKB(t){return new Blob([t]).size/1024}static \u0275fac=function(n){return new(n||a)};static \u0275prov=f({token:a,factory:a.\u0275fac,providedIn:"root"})};var _=class a{downloadFileWithContent(t,n){let e,l;if(t==="json"){let K={text:n};e=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),l="data.json"}else e=new Blob([n],{type:"text/plain"}),l="data.txt";let i=document.createElement("a");i.href=window.URL.createObjectURL(e),i.download=l,i.click(),window.URL.revokeObjectURL(i.href)}static \u0275fac=function(n){return new(n||a)};static \u0275prov=f({token:a,factory:a.\u0275fac,providedIn:"root"})};function V(a,t){if(a&1&&(r(0,"option",34),c(1),o()),a&2){let n=t.$implicit;m("value",n),s(),x("",n,"px")}}function q(a,t){if(a&1&&(r(0,"div",35),c(1),o()),a&2){let n=w();s(),M(" Match ",n.currentSearchIndex+1," of ",n.searchResults.length," ")}}var A=class a{constructor(t,n,e){this.firestore=t;this.textUtilityService=n;this.downloadService=e}addUser(){return C(this,null,function*(){let t=j(this.firestore,"users");try{yield R(t,{name:"John Doe",email:"johndoe@example.com"}),console.log("User added successfully")}catch(n){console.error("Error adding user:",n)}})}ngOnInit(){this.loadFromLocalStorage(),setInterval(()=>{this.saveToLocalStorage()},3e4)}text="";selectedFormat="text";charCount=0;sizeInKB=0;undoStack=[];redoStack=[];searchText="";fontSize=16;fontSizes=[12,14,16,18,20,22,24];searchResults=[];currentSearchIndex=-1;saveState(){this.undoStack.push(this.text),this.undoStack.length>50&&this.undoStack.shift(),this.redoStack=[]}undo(){this.undoStack.length>0&&(this.redoStack.push(this.text),this.text=this.undoStack.pop())}redo(){this.redoStack.length>0&&(this.undoStack.push(this.text),this.text=this.redoStack.pop())}search(){if(this.searchResults=[],this.currentSearchIndex=-1,!this.searchText.trim())return;let t=new RegExp(this.searchText,"gi"),n;for(;(n=t.exec(this.text))!==null;)this.searchResults.push(n.index);this.searchResults.length>0&&(this.currentSearchIndex=0,this.scrollToMatch())}nextMatch(){this.searchResults.length!==0&&(this.currentSearchIndex=(this.currentSearchIndex+1)%this.searchResults.length,this.scrollToMatch())}prevMatch(){this.searchResults.length!==0&&(this.currentSearchIndex=(this.currentSearchIndex-1+this.searchResults.length)%this.searchResults.length,this.scrollToMatch())}scrollToMatch(){let t=document.getElementById("textArea");if(!t)return;let n=this.searchResults[this.currentSearchIndex];t.focus(),t.setSelectionRange(n,n+this.searchText.length)}onTextChange(t){this.text=t.target.value,this.charCount=this.textUtilityService.getCharacterCount(this.text),this.sizeInKB=this.textUtilityService.getSizeInKB(this.text)}downloadText(){this.downloadService.downloadFileWithContent(this.selectedFormat,this.text)}clearTextArea(){this.text="",this.saveState()}saveToLocalStorage(){localStorage.setItem("savedText",this.text),console.log("Text saved to local storage")}loadFromLocalStorage(){let t=localStorage.getItem("savedText");t!==null&&(this.text=t,console.log("Text loaded from local storage"))}clearSavedText(){localStorage.removeItem("savedText"),this.text="",console.log("Saved text cleared")}SaveToCloud(){this.clearSavedText()}static \u0275fac=function(n){return new(n||a)(v(F),v(S),v(_))};static \u0275cmp=y({type:a,selectors:[["app-notepad"]],standalone:!0,features:[k],decls:64,vars:12,consts:[[1,"container","mt-4"],[1,"p-3","border","rounded","bg-light"],[1,"row"],[1,"col-md-6","mb-2"],[1,"col-auto","g-1"],[1,"btn","custom-btn",3,"click"],["src","apps/notepad/undo.svg","alt","Undo"],["src","apps/notepad/redo.svg","alt","Redo"],[1,"btn","custom-btn",3,"click","disabled"],["src","apps/notepad/previous.svg","alt","Previous"],["src","apps/notepad/next.svg","alt","Next"],["type","button",1,"btn","btn-outline-primary",2,"padding","5px"],["type","button",1,"btn","btn-outline-primary",2,"padding","5px",3,"click"],[1,"col-md-6"],[1,"border-bottom"],[1,"row","justify-content-md-start","align-items-md-center"],[1,"col-md-12","text-md-end"],[1,"row","gx-1"],[1,"col-auto","mb-2"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["value","text"],["value","json"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"row","align-items-center"],[1,"col-10","col-md-9","p-0"],["type","text","placeholder","Search text",1,"form-control","form-control-sm","w-100",3,"ngModelChange","ngModel"],[1,"col-2","col-md-3","text-end","p-1"],["src","apps/notepad/search.svg","alt","Search"],[1,"row","mt-1"],[1,"col-auto"],[2,"font-size","10px"],["id","textArea",1,"form-control",2,"height","70vh",3,"ngModelChange","input","ngModel"],["class","ms-2 text-nowrap",4,"ngIf"],[3,"value"],[1,"ms-2","text-nowrap"]],template:function(n,e){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",2)(5,"div",4)(6,"button",5),d("click",function(){return e.undo()}),p(7,"img",6),o()(),r(8,"div",4)(9,"button",5),d("click",function(){return e.redo()}),p(10,"img",7),o()(),r(11,"div",4)(12,"button",8),d("click",function(){return e.prevMatch()}),p(13,"img",9),o()(),r(14,"div",4)(15,"button",8),d("click",function(){return e.nextMatch()}),p(16,"img",10),o()(),r(17,"div",4)(18,"button",11),c(19,"Save"),o()(),r(20,"div",4)(21,"button",12),d("click",function(){return e.clearTextArea()}),c(22,"New"),o()(),r(23,"div",4)(24,"button",12),d("click",function(){return e.saveToLocalStorage()}),c(25,"Print"),o()()()(),r(26,"div",13)(27,"div",2)(28,"div",14)(29,"div",15)(30,"div",16)(31,"div",17)(32,"div",18)(33,"select",19),g("ngModelChange",function(i){return h(e.fontSize,i)||(e.fontSize=i),i}),b(34,V,2,2,"option",20),o()(),r(35,"div",18)(36,"select",19),g("ngModelChange",function(i){return h(e.selectedFormat,i)||(e.selectedFormat=i),i}),r(37,"option",21),c(38,"Text"),o(),r(39,"option",22),c(40,"JSON"),o()()(),r(41,"div",18)(42,"button",23),d("click",function(){return e.downloadText()}),c(43,"Download"),o()()()()()()()(),r(44,"div",3)(45,"div",24)(46,"div",25)(47,"input",26),g("ngModelChange",function(i){return h(e.searchText,i)||(e.searchText=i),i}),o()(),r(48,"div",27)(49,"button",5),d("click",function(){return e.search()}),p(50,"img",28),o()()(),r(51,"div",29)(52,"div",30)(53,"p",31)(54,"strong"),c(55,"Characters:"),o(),c(56),o()(),r(57,"div",30)(58,"p",31)(59,"strong"),c(60,"Size:"),o(),c(61),o()()()()(),r(62,"textarea",32),g("ngModelChange",function(i){return h(e.text,i)||(e.text=i),i}),d("input",function(i){return e.saveState(),e.onTextChange(i)}),o()(),b(63,q,2,2,"div",33),o()),n&2&&(s(12),m("disabled",e.searchResults.length===0),s(3),m("disabled",e.searchResults.length===0),s(18),u("ngModel",e.fontSize),s(),m("ngForOf",e.fontSizes),s(2),u("ngModel",e.selectedFormat),s(11),u("ngModel",e.searchText),s(9),x(" ",e.charCount,""),s(5),x(" ",e.sizeInKB.toFixed(2)," KB"),s(),T("font-size",e.fontSize,"px"),u("ngModel",e.text),s(),m("ngIf",e.searchResults.length>0))},dependencies:[W,D,P,O,L,z,B,E,I,N],styles:[".custom-btn[_ngcontent-%COMP%]{background-color:#fff!important;border:1px solid black!important;padding:10px!important;width:36px;height:36px;display:flex;align-items:center;justify-content:center}.custom-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}@media (max-width: 768px){.toolbar[_ngcontent-%COMP%]{justify-content:center}.form-control-sm[_ngcontent-%COMP%]{width:100%}}.btn[_ngcontent-%COMP%]{border:1px solid black}"]})};export{A as NotepadComponent};
