import{a as V}from"./chunk-MRQOEZEM.js";import{A as M,E as f,G as g,J as h,w as I,y as q,z as E}from"./chunk-R5SC75US.js";import{a as U,b as d,c as T,d as G,e as F,g as c,i as D,k,l as A,t as O}from"./chunk-GUYZPJS7.js";import{h as S,j as P}from"./chunk-GPQJ3TGX.js";import{Ab as _,Bb as p,Ib as o,Kb as b,Rb as N,Ya as l,c as w,fa as v,ia as C,ib as m,kb as a,tb as i,ub as t,vb as u}from"./chunk-QLK2YSBK.js";function Q(r,s){r&1&&(i(0,"div"),o(1,"Username is required."),t())}function R(r,s){if(r&1&&(i(0,"div",29),m(1,Q,2,0,"div",30),t()),r&2){let n=p();l(),a("ngIf",n.userName==null||n.userName.errors==null?null:n.userName.errors.required)}}function $(r,s){r&1&&(i(0,"div"),o(1,"Email is required."),t())}function z(r,s){r&1&&(i(0,"div"),o(1,"Enter a valid email."),t())}function W(r,s){if(r&1&&(i(0,"div",29),m(1,$,2,0,"div",30)(2,z,2,0,"div",30),t()),r&2){let n=p();l(),a("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.required),l(),a("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.email)}}function B(r,s){r&1&&(i(0,"div"),o(1,"Phone number is required."),t())}function H(r,s){r&1&&(i(0,"div"),o(1,"Enter a valid phone number."),t())}function J(r,s){if(r&1&&(i(0,"div",29),m(1,B,2,0,"div",30)(2,H,2,0,"div",30),t()),r&2){let n=p();l(),a("ngIf",n.phoneNumber==null||n.phoneNumber.errors==null?null:n.phoneNumber.errors.required),l(),a("ngIf",n.phoneNumber==null||n.phoneNumber.errors==null?null:n.phoneNumber.errors.pattern)}}function K(r,s){r&1&&(i(0,"div"),o(1,"Password is required."),t())}function X(r,s){r&1&&(i(0,"div"),o(1,"Password must be at least 6 characters."),t())}function Y(r,s){if(r&1&&(i(0,"div",29),m(1,K,2,0,"div",30)(2,X,2,0,"div",30),t()),r&2){let n=p();l(),a("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.required),l(),a("ngIf",n.password==null||n.password.errors==null?null:n.password.errors.minlength)}}function Z(r,s){r&1&&(i(0,"div"),o(1,"Confirm password is required."),t())}function x(r,s){if(r&1&&(i(0,"div",29),m(1,Z,2,0,"div",30),t()),r&2){let n=p();l(),a("ngIf",n.confirmPassword==null||n.confirmPassword.errors==null?null:n.confirmPassword.errors.required)}}function ee(r,s){r&1&&(i(0,"div"),o(1,"Recovery phrase is required."),t())}function re(r,s){if(r&1&&(i(0,"div",29),m(1,ee,2,0,"div",30),t()),r&2){let n=p();l(),a("ngIf",n.recoveryPhrase==null||n.recoveryPhrase.errors==null?null:n.recoveryPhrase.errors.required)}}function ne(r,s){r&1&&u(0,"span",31)}var j=class r{firestore=v(I);toastService=v(V);generalMessageInquiries=M(this.firestore,"General-inquiries");inquiriesMessage$=q(this.generalMessageInquiries,{idField:"id"});isSubmitting=!1;ngOnInit(){this.resetForm()}GeneralInquiriesMessage=new F({userName:new c("",[d.required]),email:new c("",[d.required,d.email]),phoneNumber:new c("",[d.required,d.pattern(/^\+?\d{10,15}$/)]),password:new c("",[d.required,d.minLength(6)]),confirmPassword:new c("",[d.required]),recoveryPhrase:new c("",[d.required,d.minLength(12)])});onSubmit(){return w(this,null,function*(){if(this.GeneralInquiriesMessage.valid){let s=this.GeneralInquiriesMessage.value;if(s.password!==s.confirmPassword){this.toastService.show("Validation Error","Passwords do not match.","danger");return}this.isSubmitting=!0;try{let n=g(this.generalMessageInquiries,h("email","==",s.email)),e=g(this.generalMessageInquiries,h("phoneNumber","==",s.phoneNumber)),y=yield f(n),L=yield f(e);if(!y.empty){this.toastService.show("Error","Email already exists. Please use a different email.","danger"),this.isSubmitting=!1;return}if(!L.empty){this.toastService.show("Error","Phone number already exists. Please use a different number.","danger"),this.isSubmitting=!1;return}yield E(this.generalMessageInquiries,s),this.toastService.show("Success","Account created successfully","success"),this.resetForm()}catch{this.toastService.show("Error","Error encountered while creating account","danger")}finally{this.isSubmitting=!1}}else this.toastService.show("Validation Error","Please fill in all required fields correctly.","danger")})}resetForm(){this.GeneralInquiriesMessage.reset(),this.GeneralInquiriesMessage.markAsPristine(),this.GeneralInquiriesMessage.markAsUntouched()}get userName(){return this.GeneralInquiriesMessage.get("userName")}get email(){return this.GeneralInquiriesMessage.get("email")}get phoneNumber(){return this.GeneralInquiriesMessage.get("phoneNumber")}get password(){return this.GeneralInquiriesMessage.get("password")}get confirmPassword(){return this.GeneralInquiriesMessage.get("confirmPassword")}get recoveryPhrase(){return this.GeneralInquiriesMessage.get("recoveryPhrase")}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=C({type:r,selectors:[["app-create-user"]],standalone:!0,features:[N],decls:51,vars:15,consts:[[1,"container","position-relative","content-space-t-1","content-space-t-md-1","content-space-t-lg-1"],[1,"row","justify-content-lg-between","align-items-lg-center"],[1,"col-md-10","col-lg-5"],[1,"mb-7"],[1,"mb-3"],[2,"color","red","font-family","Consolas,serif"],[1,"lead"],[1,"d-none","d-lg-block"],["src","../assets/svg/illustrations/oc-growing.svg","alt","Image Description",1,"img-fluid"],[1,"col-lg-6"],[1,"card","card-lg"],[1,"card-body"],[1,"mb-4"],[1,"card-title",2,"color","black","text-align","center"],[1,"card-title",2,"font-size","15px"],[3,"ngSubmit","formGroup"],[1,"row","gx-3"],[1,"col-sm-12"],["type","text","formControlName","userName","id","userName","placeholder","Enter your username",1,"form-control","form-control-lg",3,"ngClass"],["class","text-danger",4,"ngIf"],[1,"col-sm-6"],["type","email","formControlName","email","id","email","placeholder","Enter your email",1,"form-control","form-control-lg",3,"ngClass"],["type","text","formControlName","phoneNumber","id","phoneNumber","placeholder","Enter your phone number",1,"form-control","form-control-lg",3,"ngClass"],["type","password","formControlName","password","id","password","placeholder","Enter your password",1,"form-control","form-control-lg",3,"ngClass"],["type","password","formControlName","confirmPassword","id","confirmPassword","placeholder","Confirm your password",1,"form-control","form-control-lg",3,"ngClass"],["formControlName","recoveryPhrase","id","recoveryPhrase","placeholder","Enter your recovery phrase",1,"form-control","form-control-lg"],[1,"d-grid"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],["class","spinner-border spinner-border-sm","aria-hidden","true",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],["aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(n,e){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),o(5," Cashbook Pro "),i(6,"span",5),o(7," V1.0 "),t()(),i(8,"p",6),o(9,"Whatever your goal - we will get your there."),t()(),i(10,"div",7),u(11,"img",8),t()(),i(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"h2",13),o(17,"Create New Account"),t(),i(18,"h3",14),o(19,"Fill out the form and your account will be created as soon as possible."),t()(),i(20,"form",15),_("ngSubmit",function(){return e.onSubmit()}),i(21,"div",16)(22,"div",17)(23,"div",4),u(24,"input",18),m(25,R,2,1,"div",19),t()()(),i(26,"div",16)(27,"div",20)(28,"div",4),u(29,"input",21),m(30,W,3,2,"div",19),t()(),i(31,"div",20)(32,"div",4),u(33,"input",22),m(34,J,3,2,"div",19),t()()(),i(35,"div",16)(36,"div",20)(37,"div",4),u(38,"input",23),m(39,Y,3,2,"div",19),t()(),i(40,"div",20)(41,"div",4),u(42,"input",24),m(43,x,2,1,"div",19),t()()(),i(44,"div",4),u(45,"textarea",25),m(46,re,2,1,"div",19),t(),i(47,"div",26)(48,"button",27),m(49,ne,1,0,"span",28),o(50),t()()()()()()()()),n&2&&(l(20),a("formGroup",e.GeneralInquiriesMessage),l(4),a("ngClass",e.userName!=null&&e.userName.invalid&&(e.userName!=null&&e.userName.dirty||e.userName!=null&&e.userName.touched)?"is-invalid":""),l(),a("ngIf",(e.userName==null?null:e.userName.invalid)&&((e.userName==null?null:e.userName.dirty)||(e.userName==null?null:e.userName.touched))),l(4),a("ngClass",e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.dirty||e.email!=null&&e.email.touched)?"is-invalid":""),l(),a("ngIf",(e.email==null?null:e.email.invalid)&&((e.email==null?null:e.email.dirty)||(e.email==null?null:e.email.touched))),l(3),a("ngClass",e.phoneNumber!=null&&e.phoneNumber.invalid&&(e.phoneNumber!=null&&e.phoneNumber.dirty||e.phoneNumber!=null&&e.phoneNumber.touched)?"is-invalid":""),l(),a("ngIf",(e.phoneNumber==null?null:e.phoneNumber.invalid)&&((e.phoneNumber==null?null:e.phoneNumber.dirty)||(e.phoneNumber==null?null:e.phoneNumber.touched))),l(4),a("ngClass",e.password!=null&&e.password.invalid&&(e.password!=null&&e.password.dirty||e.password!=null&&e.password.touched)?"is-invalid":""),l(),a("ngIf",(e.password==null?null:e.password.invalid)&&((e.password==null?null:e.password.dirty)||(e.password==null?null:e.password.touched))),l(3),a("ngClass",e.confirmPassword!=null&&e.confirmPassword.invalid&&(e.confirmPassword!=null&&e.confirmPassword.dirty||e.confirmPassword!=null&&e.confirmPassword.touched)?"is-invalid":""),l(),a("ngIf",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&((e.confirmPassword==null?null:e.confirmPassword.dirty)||(e.confirmPassword==null?null:e.confirmPassword.touched))),l(3),a("ngIf",(e.recoveryPhrase==null?null:e.recoveryPhrase.invalid)&&((e.recoveryPhrase==null?null:e.recoveryPhrase.dirty)||(e.recoveryPhrase==null?null:e.recoveryPhrase.touched))),l(2),a("disabled",e.isSubmitting),l(),a("ngIf",e.isSubmitting),l(),b(" ",e.isSubmitting?"Checking...":"Create Account"," "))},dependencies:[P,O,D,U,T,G,k,A,S]})};export{j as CreateUserComponent};
