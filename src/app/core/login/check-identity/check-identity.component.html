<main id="content" role="main" class="bg-light">

  <div class="navbar-dark bg-primary" style="background-image: url(./assets/svg/components/wave-pattern-light.svg);">
    <div class="container content-space-1 content-space-b-lg-3">
      <div class="row align-items-center">
        <div class="col">
          <div class=" ">
            <h1 class="h2 text-white">Authorization</h1>
          </div>


        </div>
        <!-- End Col -->

        <div class="col-auto">
          <div class="d-none d-lg-block">
            <a class="btn btn-soft-light btn-sm" href="#">Log out</a>
          </div>

          <!-- Responsive Toggle Button -->
          <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarNav" aria-controls="sidebarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-default">
                <i class="bi-list"></i>
              </span>
            <span class="navbar-toggler-toggled">
                <i class="bi-x"></i>
              </span>
          </button>
          <!-- End Responsive Toggle Button -->
        </div>
        <!-- End Col -->
      </div>
      <!-- End Row -->
    </div>
  </div>
  <!-- End Breadcrumb -->

  <!-- Content Section -->
  <div class="container content-space-1 content-space-t-lg-0 content-space-b-lg-2 mt-n10">
    <div class="row g-1 g-lg-3">
      <div class="col-lg-5 order-2 order-sm-2">



        <div class="mx-auto ">
          <!-- Card -->
          <div class="card card-lg mb-5 h-100" >
            <div class="card-body">
              <!-- Form -->
              <form class="js-validate needs-validation" novalidate="">
                <div class="text-center">
                  <div class="mb-5">

                    <h3>Login to manage your account.</h3>
                  </div>
                </div>
                <!-- Form -->
                <div class="mb-4">
                  <label class="form-label" for="resetPasswordSrEmail" tabindex="0">Your email</label>

                  <input  [(ngModel)]="emailInput" type="email" class="form-control form-control-lg" name="email" id="resetPasswordSrEmail" tabindex="1" placeholder="Enter your email address" aria-label="Enter your email address" required="">
                  <span class="invalid-feedback">Please enter a valid email address.</span>
                </div>
                <!-- End Form -->

                <div class="d-grid gap-2">
                  <button (click)="searchUserByEmail(emailInput)" type="submit" class="btn btn-primary btn-lg">Submit</button>

                  <div class="text-center">

                    <div class="w-100 mt-4" >
                      <div class="d-flex justify-content-between fs-sm pb-1 mb-2">
                        Profile completion
                        <strong class="ms-2">62%</strong>
                      </div>
                      <div class="progress" style="height: 5px;">
                        <div class="progress-bar" role="progressbar" style="width: 62%" aria-valuenow="62" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                    </div>

                    <div class="row g-1 mt-3">
                      <div class="col-7"><button type="button" class="btn btn-primary btn-lg w-100">Create Account</button></div>
                      <div class="col-5"><button type="button" class="btn btn-primary btn-lg w-100">Log in</button></div>
                    </div>
                  </div>
                </div>
              </form>
              <!-- End Form -->
            </div>
          </div>

        </div>
      </div>

      <div class="col-lg-7 order-1 order-sm-1 h-100">

        <section class="card border-0 py-1 p-md-2 p-xl-3 p-xxl-4 mb-4"  style="min-height: 90%">
          <div class="d-flex justify-content-center align-items-center mb-3">
          <!-- Show loading GIF only when userInfo is not available -->
          <img  style="max-width: 250px; height: auto;" *ngIf="!userInfo" src="gif/lod4.gif" alt="">

          </div>
          <h1 class="text-center display-2" >{{EndTime}}</h1>
          <h2 class="text-center" *ngIf="!userInfo" src="gif/g.gif">Shutting down system</h2>
          <!-- Show user profile only when userInfo exists -->
          <div class="card-body" *ngIf="userInfo">
            <!-- The rest of your content stays the same -->
            <div class="d-flex align-items-center mt-sm-n1 pb-4 mb-0 mb-lg-1 mb-xl-3">
              <i class="ai-user text-primary lead pe-1 me-2"></i>
              <h2 class="h4 mb-0">Profile Information</h2>
              <a class="btn btn-sm btn-primary ms-auto" href="account-settings.html">
                <i class="ai-edit ms-n1 me-2"></i>
                Download information
              </a>
            </div>
            <div class="d-md-flex align-items-center">
              <div class="d-sm-flex align-items-center">
                <img [src]="userInfo['image']" style="width: 80px; height: 80px;">
                <div class="pt-3 pt-sm-0 ps-sm-3">
                  <h1 class="mb-2">
                    {{ userInfo['name'] || 'N/A' }}
                    <i class="ai-circle-check-filled fs-base text-success ms-2"></i>
                  </h1>
                  <div class="text-body-secondary fw-medium d-flex flex-wrap flex-sm-nowrap align-iteems-center">
                    <div class="d-flex align-items-center me-3">
                      <i class="ai-mail me-1"></i>
                      {{ userInfo['email'] }}
                    </div>
                    <div class="d-flex align-items-center text-nowrap">
                      <i class="ai-map-pin me-1"></i>
                      USA, $
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Table and buttons -->
            <div class="row py-2 mb-2">
              <div class="col-md-12">
                <table class="table mb-4">
                  <tbody>
                  <tr>
                    <td class="border-0 text-body-secondary py-1 px-0">Phone</td>
                    <td class="border-0 text-dark fw-medium py-1 ps-3">{{ userInfo['phone'] || 'N/A' }}</td>
                  </tr>
                  <tr>
                    <td class="border-0 text-body-secondary py-1 px-0">Language</td>
                    <td class="border-0 text-dark fw-medium py-1 ps-3">English</td>
                  </tr>
                  <tr>
                    <td class="border-0 text-body-secondary py-1 px-0">UID</td>
                    <td class="border-0 text-dark fw-medium py-1 ps-3">{{ userInfo['UID'] || 'N/A' }}</td>
                  </tr>
                  <tr>
                    <td class="border-0 text-body-secondary py-1 px-0">Communication</td>
                    <td class="border-0 text-dark fw-medium py-1 ps-3">Mobile, email</td>
                  </tr>
                  </tbody>
                </table>

                <div class="row g-1">
                  <div class="col-4">
                    <a class="btn btn-white btn-sm w-100" (click)="moduleOpenModal()">
                      <i class="bi-truck small me-2"></i> Token
                    </a>
                  </div>
                  <div class="col-5">
                    <a class="btn btn-white btn-sm w-100" (click)="moduleOpenModal2()">
                      <i class="bi-arrow-counterclockwise small me-2"></i> Email
                    </a>
                  </div>
                  <div class="col-3">
                    <a class="btn btn-white btn-sm w-100" (click)="moduleOpenModal3()">
                      <i class="bi-basket small me-2"></i> OTP
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </section>

      </div>


      <div *ngIf="moduleModalOpen" class="modal-overlay">
        <div class="modal-content">
          <div class="card h-100">

            <!-- Header -->
            <div class="card-header d-flex justify-content-end gap-2">
              <h2 class="card-header-title me-auto"> </h2>

              <a class="btn btn-ghost-danger btn-sm" (click)="moduleCloseModal()">Close</a>
            </div>
      <app-token-login></app-token-login>

          </div>
        </div>
      </div>
      <div *ngIf="moduleModalOpen2" class="modal-overlay">
        <div class="modal-content">
          <div class="card h-100">

            <!-- Header -->
            <div class="card-header d-flex justify-content-end gap-2">
              <h2 class="card-header-title me-auto"> </h2>

              <a class="btn btn-ghost-danger btn-sm" (click)="moduleCloseModal2()">Close</a>
            </div>
            <!-- End Header -->
<app-email-login></app-email-login>

            <!-- End Body -->
          </div>
        </div>
      </div>
      <div *ngIf="moduleModalOpen3" class="modal-overlay">
        <div class="modal-content">

          <div class="card h-100">
            <!-- Header -->
            <div class="card-header d-flex justify-content-end gap-2">
              <h2 class="card-header-title me-auto"> </h2>

              <a class="btn btn-ghost-danger btn-sm" (click)="moduleCloseModal3()">Close</a>
            </div>
            <!-- End Header -->

           <app-otplogin></app-otplogin>
            <!-- End Body -->
          </div>
        </div>
      </div>

    </div>
  </div>
  <!-- End Content Section -->
</main>




